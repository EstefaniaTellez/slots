<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Traductor de Mensajes SSIM IATA</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            height: 100vh;
            margin: 0;
            padding: 10px;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .container {
            width: 100%;
            max-width: 1400px;
            height: calc(100vh - 20px);
            background: white;
            border-radius: 10px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px 20px;
            text-align: center;
            flex-shrink: 0;
        }

        .header h1 {
            font-size: 1.5em;
            margin: 0 0 5px 0;
        }

        .header p {
            margin: 0;
            font-size: 0.85em;
            opacity: 0.9;
        }

        .content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            padding: 15px;
            flex: 1;
            overflow: hidden;
        }

        .panel {
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .panel-header {
            background: #f8f9fa;
            padding: 10px 15px;
            border-radius: 6px 6px 0 0;
            font-weight: bold;
            color: #333;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.9em;
            flex-shrink: 0;
        }

        textarea {
            width: 100%;
            flex: 1;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 0 0 6px 6px;
            font-family: 'Courier New', monospace;
            font-size: 13px;
            resize: none;
            box-sizing: border-box;
        }

        .output-area {
            width: 100%;
            flex: 1;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 0 0 6px 6px;
            font-family: Arial, sans-serif;
            font-size: 13px;
            overflow-y: auto;
            background: #f9f9f9;
            white-space: pre-wrap;
            line-height: 1.5;
            box-sizing: border-box;
        }

        .button-group {
            display: flex;
            gap: 10px;
            padding: 0 15px 15px 15px;
            justify-content: center;
            flex-shrink: 0;
        }

        button {
            padding: 10px 25px;
            font-size: 14px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: bold;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .btn-secondary {
            background: #6c757d;
            color: white;
            padding: 8px 15px;
            font-size: 12px;
        }

        .btn-secondary:hover {
            background: #5a6268;
        }

        .alert {
            padding: 10px;
            margin: 10px 15px;
            border-radius: 6px;
            display: none;
            font-size: 0.9em;
        }

        .alert-info {
            background: #d1ecf1;
            color: #0c5460;
            border-left: 4px solid #17a2b8;
        }

        .alert-error {
            background: #f8d7da;
            color: #721c24;
            border-left: 4px solid #dc3545;
        }

        @media (max-width: 1024px) {
            .content {
                grid-template-columns: 1fr;
            }
        }

        .section-title {
            font-weight: bold;
            color: #667eea;
            margin-top: 15px;
            margin-bottom: 10px;
            border-bottom: 2px solid #667eea;
            padding-bottom: 5px;
        }

        .field-item {
            margin-left: 15px;
            margin-bottom: 10px;
        }

        .field-label {
            font-weight: bold;
            color: #333;
        }

        .field-value {
            color: #555;
            margin-left: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üìã Traductor de Mensajes SSIM IATA</h1>
            <p>Interpreta y traduce mensajes del formato SSIM de la IATA</p>
        </div>

        <div id="alertBox" class="alert"></div>

        <div class="content">
            <div class="panel">
                <div class="panel-header">
                    <span>Mensaje SSIM</span>
                    <button class="btn-secondary" onclick="loadExample()">Cargar Ejemplo</button>
                </div>
                <textarea id="inputText" placeholder="Ingresa aqu√≠ el mensaje SSIM..."></textarea>
            </div>

            <div class="panel">
                <div class="panel-header">
                    <span>Traducci√≥n Detallada</span>
                </div>
                <div id="outputText" class="output-area">Los resultados aparecer√°n aqu√≠...</div>
            </div>
        </div>

        <div class="button-group">
            <button class="btn-primary" onclick="translateMessage()">üîç Traducir Mensaje Completo</button>
        </div>
    </div>

    <script>
        const airports = {
            'ABD': 'Abadan, Ir√°n', 'ABJ': 'Abidjan, Costa de Marfil', 'AUH': 'Abu Dhabi, Emiratos √Årabes',
            'ACA': 'Acapulco, M√©xico', 'ACC': 'Accra, Ghana', 'ADD': 'Addis Abeba, Etiop√≠a',
            'ADL': 'Adelaide, Australia', 'ALY': 'Alejandr√≠a, Egipto', 'ALP': 'Aleppo, Siria',
            'ARR': 'Alto R√≠o Senguerr, Argentina', 'AMM': 'Amman, Jordania', 'AMS': '√Åmsterdam, Holanda',
            'ANC': 'Anchorage (Alaska), Estados Unidos', 'ANK': 'Ankara, Turqu√≠a', 'TNR': 'Antananarivo, Madagascar',
            'ANU': 'Antigua, Antigua y Barbuda', 'ANF': 'Antofagasta, Chile', 'APW': 'Apia, Samoa O.',
            'AJU': 'Aracaju (SE), Brasil', 'AQP': 'Arequipa, Per√∫', 'ALG': 'Argel, Argelia',
            'ARI': 'Arica, Chile', 'AUA': 'Aruba, Antillas Holandesas', 'ASM': 'Asmara, Etiop√≠a',
            'ASU': 'Asunci√≥n, Paraguay', 'ATH': 'Atenas, Grecia', 'ATL': 'Atlanta, Estados Unidos',
            'AKL': 'Auckland, Nueva Zelanda', 'AYP': 'Ayacucho, Per√∫', 'BGW': 'Bagdad, Irak',
            'BHI': 'Bah√≠a Blanca, Argentina', 'BAH': 'Bahrein, Bahrein', 'BBA': 'Balmaceda, Chile',
            'BWI': 'Baltimore (Maryland), U.S.A.', 'BKO': 'Bamako, Mali', 'BKK': 'Bangkok, Tailandia',
            'BGF': 'Bangui, Rep. Centroafricana', 'BJL': 'Banjul, Gambia', 'BGI': 'Barbados, Antillas',
            'BCN': 'Barcelona, Espa√±a', 'BLA': 'Barcelona, Venezuela', 'BRC': 'Bariloche, Argentina',
            'BAQ': 'Barranquilla, Colombia', 'BSR': 'Basra, Iraq', 'BEI': 'Beirut, L√≠bano',
            'BEY': 'Beirut, L√≠bano', 'BEL': 'Bel√©m, Brasil', 'BEG': 'Belgrado, Yugoslavia',
            'BHZ': 'Belo Horizonte, Brasil', 'BEN': 'Benghazi, Libia', 'BGO': 'Bergen, Noruega',
            'BER': 'Berl√≠n, Alemania', 'BIO': 'Bilbao, Espa√±a', 'BLZ': 'Blantyre, Malawi',
            'BOG': 'Bogot√°, Colombia', 'BLR': 'Bol√≠var, Argentina', 'BLQ': 'Bologna, Italia',
            'BOM': 'Bombay, India', 'BON': 'Bonaire, Antillas Holandesas', 'BOS': 'Boston, Estados Unidos',
            'BSB': 'Brasilia (DF), Brasil', 'BTS': 'Bratislava, Checoslovaquia', 'BZV': 'Brazzaville, Rep. Pop. del Congo',
            'BNE': 'Brisbane, Australia', 'BRU': 'Bruselas, B√©lgica', 'BUH': 'Bucarest, Rumania',
            'BUD': 'Budapest, Hungr√≠a', 'BUE': 'Buenos Aires, Argentina', 'BNF': 'Buffalo (Nueva York), U.S.A.',
            'BJM': 'Bujumbura, Burundi', 'BKY': 'Bukavu, Zaire', 'BUQ': 'Bulawayo, Zimbawe',
            'BWN': 'B. Seri Begawan, Brunei', 'CNS': 'Cairns, Australia', 'CJC': 'Calama, Chile',
            'CCU': 'Calcuta, India', 'YYC': 'Calgary, Canad√°', 'CLO': 'Cali, Colombia',
            'CUN': 'Canc√∫n, M√©xico', 'CPT': 'Cape Town, Sud√°frica', 'CCS': 'Caracas, Venezuela',
            'CTG': 'Cartagena, Colombia', 'CAS': 'Casablanca, Marruecos', 'CTC': 'Catamarca, Argentina',
            'CAT': 'Catania, Italia', 'CVH': 'Caviahue, Argentina', 'CAY': 'Cayena, Guayana Francesa',
            'CYL': 'Cayo Largo, Cuba', 'CEB': 'Ceb√∫, Filipinas', 'CPC': 'Chapelco, Argentina',
            'CHI': 'Chicago, Estados Unidos', 'CIX': 'Chiclayo, Per√∫', 'OEL': 'Choele Choel, Argentina',
            'CHM': 'Chos Malal, Argentina', 'CHC': 'Christchurch, Nueva Zelanda', 'CVG': 'Cincinnati (Ohio), U.S.A.',
            'CLE': 'Cleveland (Ohio), U.S.A.', 'CBB': 'Cochabamba, Bolivia', 'CMB': 'Colombo, Sri Lanka',
            'CGN': 'Colonia, Alemania', 'CYR': 'Colonia, Uruguay', 'CLT': 'Colonia Catriel, Argentina',
            'CMH': 'Columbus (Ohio), U.S.A.', 'CRD': 'Comodoro Rivadavia, Argentina', 'CKY': 'Conakri, Guinea',
            'CCP': 'Concepci√≥n, Chile', 'COC': 'Concordia, Argentina', 'CPH': 'Copenhague, Dinamarca',
            'CPO': 'Copiap√≥, Chile', 'COR': 'C√≥rdoba, Argentina', 'CSU': 'Coronel Su√°rez, Argentina',
            'SUZ': 'Coronel Su√°rez, Argentina', 'CNQ': 'Corrientes, Argentina', 'COO': 'Cotonou, Benin',
            'CGB': 'Cuiab√°, Brasil', 'CUR': 'Cura√ßao, Antillas', 'CWB': 'Curitiba, Brasil',
            'CUT': 'Cutral-C√≥, Argentina', 'CUZ': 'Cuzco, Per√∫', 'DKR': 'Dakar, Senegal',
            'DLC': 'Dalian, Rep. Pop. China', 'DFW': 'Dallas/Fort Worth, Estados Unidos', 'DAM': 'Damasco, Siria',
            'DAR': 'Dar Es Salaam, Tanzania', 'DAY': 'Dayton (Ohio), USA', 'DEL': 'Delhi, India',
            'DPS': 'Denpasar-Bali, Indonesia', 'DEN': 'Denver (Colorado), U.S.A.', 'DTT': 'Detroit (Michigan), U.S.A.',
            'DHA': 'Dhahran, Arabia Saudita', 'DAC': 'Dhaka, Bangladesh', 'DIR': 'Dire Dawa, Etiop√≠a',
            'JIB': 'Djibouti, Djibouti', 'DOH': 'Doha, Qatar', 'DLA': 'Douala, Camer√∫n',
            'DXB': 'Dubai, Emiratos √Årabes Unidos', 'DUB': 'Dubl√≠n, Irlanda', 'DBV': 'Dubrovnik, Croacia',
            'DUS': 'D√ºsseldorf, Alemania', 'YEG': 'Edmonton, Canad√°', 'EHL': 'El Bols√≥n, Argentina',
            'CAI': 'El Cairo, Egipto', 'CLF': 'El Calafate, Argentina', 'ECL': 'El Chalt√©n, Argentina',
            'EMX': 'El Mait√©n, Argentina', 'ESR': 'El Salvador, Chile', 'EBB': 'Entebe, Uganda',
            'IZM': 'Esmirna, Turqu√≠a', 'EQS': 'Esquel, Argentina', 'IST': 'Estambul, Turqu√≠a',
            'STO': 'Estocolmo, Suecia', 'SXB': 'Estrasburgo, Francia', 'FAO': 'Faro, Portugal',
            'PHL': 'Filadelfia (Pennsylvania), U.S.A.', 'FLN': 'Florian√≥polis, Brasil', 'FMA': 'Formosa, Argentina',
            'FDF': 'Fort de France, Martinica', 'FLL': 'Fort Lauderdale (Florida), E.E.U.U.', 'FOR': 'Fortaleza (CE), Brasil',
            'FRA': 'Frankfurt, Alemania', 'FNA': 'Freetown, Sierra Leona', 'FUK': 'Fukuoka, Jap√≥n',
            'FNC': 'Funchal (Is. Madeira), Portugal', 'GBE': 'Gaborone, Botswana', 'GPO': 'General Pico, Argentina',
            'GNR': 'General Roca, Argentina', 'GOA': 'G√©nova, Italia', 'GEO': 'Georgetown, Guyana',
            'GIB': 'Gibraltar, Gibraltar', 'GVA': 'Ginebra, Suiza', 'GGS': 'Gobernador Gregores, Argentina',
            'GYN': 'Goi√¢nia, Brasil', 'GOT': 'Gotemburgo, Suecia', 'OYA': 'Goya, Argentina',
            'GRZ': 'Graz, Austria', 'GUM': 'Guam, Guam', 'CAN': 'Guangzhou, Rep. Pop. China',
            'GUA': 'Guatemala, Guatemala', 'OUA': 'Guatemala, Guatemala', 'GYE': 'Guayaquil, Ecuador',
            'HAV': 'La Habana, Cuba', 'HAM': 'Hamburgo, Alemania Federal', 'HAN': 'Hanoi, Vietnam',
            'HRE': 'Harare, Zimbawe', 'BDL': 'Hartford (Connecticut), U.S.A.', 'HEL': 'Helsinki, Finlandia',
            'SGN': 'Ho Chi Minh, Vietnam', 'HKG': 'Hong Kong, Hong Kong', 'HNL': 'Honolulu (Hawaii), Estados Unidos',
            'HOR': 'Horta (Is. Azores), Portugal', 'HOU': 'Houston, Estados Unidos', 'IGU': 'Igua√ßu, Brasil',
            'IGR': 'Iguaz√∫, Argentina', 'ILH': 'Ilha do Sal, Cabo Verde', 'SID': 'Ilha do Sal, Cabo Verde',
            'IND': 'Indian√°polis (Indiana), U.S.A.', 'IJC': 'Ingeniero Jacobacci, Argentina', 'IQQ': 'Iquique, Chile',
            'IQT': 'Iquitos, Per√∫', 'IPC': 'Isla de Pascua, Chile', 'ISB': 'Islamabad, Pakist√°n',
            'JKT': 'Jakarta, Indonesia', 'JED': 'Jeddah, Arabia Saudita', 'JRS': 'Jerusalem, Israel',
            'JPA': 'Jo√£o Pessoa (PB), Brasil', 'JNB': 'Johannesburgo, Sud√°frica', 'JSM': 'Jos√© de San Mart√≠n, Argentina',
            'JUJ': 'Jujuy, Argentina', 'KBL': 'Kabul, Afganist√°n', 'KAN': 'Kano, Nigeria',
            'MKC': 'Kansas (Missouri), USA', 'KHH': 'Kaohsiung, Taiw√°n', 'KHI': 'Karachi, Pakist√°n',
            'KTM': 'Katmand√∫, Nepal', 'KRT': 'Jartum, Sud√°n', 'KGL': 'Kigali, Rwanda',
            'KIN': 'Kingston, Jamaica', 'FIH': 'Kinshasa, Zaire', 'KLU': 'Klagenfurt, Austria',
            'BKI': 'Kota Kinabalu, Malasia', 'KRS': 'Kristiansand, Noruega', 'JUL': 'Kuala Lumpur, Malasia',
            'KUL': 'Kuala Lumpur, Malasia', 'KWI': 'Kuwait, Kuwait', 'LCE': 'La Ceiba, Honduras',
            'LCG': 'La Coru√±a, Espa√±a', 'LPB': 'La Paz, Bolivia', 'LPG': 'La Plata, Argentina',
            'IRJ': 'La Rioja, Argentina', 'LSC': 'La Serena, Chile', 'ING': 'Lago Argentino, Argentina',
            'LOS': 'Lagos, Nigeria', 'SUF': 'Lamezia Terme, Italia', 'LCA': 'Larnaca, Chipre',
            'CHS': 'Las Heras, Argentina', 'LPA': 'Las Palmas, Espa√±a', 'LAS': 'Las Vegas (Nevada), USA',
            'LBV': 'Libreville, Gab√≥n', 'LIL': 'Lille, Francia', 'LLW': 'Lilongwe, Malawi',
            'LIM': 'Lima, Per√∫', 'LNZ': 'Linz, Austria', 'LIS': 'Lisboa, Portugal',
            'LJU': 'Ljubljana, Eslovenia', 'LFW': 'Lom√©, Togo', 'LCP': 'Loncopu√©, Argentina',
            'LON': 'Londres, Inglaterra', 'LAX': 'Los √Ångeles, Estados Unidos', 'LSQ': 'Los √Ångeles, Chile',
            'LAD': 'Luanda, Angola', 'FBM': 'Lubumbashi, Zaire', 'LUN': 'Lusaka, Zambia',
            'LUX': 'Luxemburgo, Luxemburgo', 'LYS': 'Lyon, Francia', 'MCP': 'Macap√°, Brasil',
            'MCZ': 'Macei√≥, Brasil', 'MAA': 'Madras, India', 'MAD': 'Madrid, Espa√±a',
            'AGP': 'M√°laga, Espa√±a', 'MLG': 'Malarg√ºe, Argentina', 'MMA': 'Malm√∂, Suecia',
            'MLA': 'Malta, Malta', 'MGA': 'Managua, Nicaragua', 'MAO': 'Manaos, Brasil',
            'MNL': 'Manila, Filipinas', 'MPM': 'Maputo, Mozambique', 'MDQ': 'Mar del Plata, Argentina',
            'MAR': 'Maracaibo, Venezuela', 'MRS': 'Marsella, Francia', 'MCT': 'Mascate, Om√°n',
            'MRU': 'Mauricio (Is. Mauricio)', 'MDE': 'Medell√≠n, Colombia', 'MEL': 'Melbourne, Australia',
            'MDZ': 'Mendoza, Argentina', 'MEM': 'Memphis (Tennessee), U.S.A.', 'MID': 'M√©rida, M√©xico',
            'MEX': 'M√©xico, M√©xico', 'MIA': 'Miami, Estados Unidos', 'MIL': 'Mil√°n, Italia',
            'MKE': 'Milwaukee (Wisconsin), U.S.A.', 'MSP': 'Mine√°polis (Minnesota), U.S.A.', 'MLW': 'Monrovia, Liberia',
            'MBJ': 'Montego Bay, Jamaica', 'MVD': 'Montevideo, Uruguay', 'YUL': 'Montreal, Canad√°',
            'MOW': 'Mosc√∫, U.R.S.S.', 'MLH': 'Mulhouse, Francia', 'MUC': 'M√∫nich, Alemania Federal',
            'NAN': 'Nadi, Fiji', 'NGO': 'Nagoya, Jap√≥n', 'NAP': 'N√°poles, Italia',
            'BNA': 'Nashville (Tennessee), USA', 'NAS': 'Nassau, Bahamas', 'NAT': 'Natal (RN), Brasil',
            'NEC': 'Necochea, Argentina', 'NQN': 'Neuqu√©n, Argentina', 'NIM': 'Niamey, Nigeria',
            'NIC': 'Nicosia, Chipre', 'IUE': 'Niue (Isla Niue)', 'NCE': 'Niza, Francia',
            'ORF': 'Norfolk (Virginia), USA', 'NKC': 'Nouakchott, Mauritania', 'NOU': 'Noum√©a, Nueva Caledonia',
            'MSY': 'Nueva Orleans, Estados Unidos', 'NYC': 'Nueva York, Estados Unidos', 'NDJ': 'Ndjamena, Chad',
            'ODS': 'Odessa, C.E.I.', 'OKA': 'Okinawa, Jap√≥n', 'OLC': 'Olavarr√≠a, Argentina',
            'OPO': 'Oporto, Portugal', 'ORL': 'Orlando, Estados Unidos', 'OSA': 'Osaka, Jap√≥n',
            'OSL': 'Oslo, Noruega', 'ZOS': 'Osorno, Chile', 'YOW': 'Ottawa, Canad√°',
            'PPG': 'Pago Pago, Samoa', 'PMO': 'Palermo, Italia', 'PTY': 'Panam√°, Panam√°',
            'PPT': 'Papeete, Tahit√≠', 'PBM': 'Paramaribo, Surinam', 'PRA': 'Paran√°, Argentina',
            'PAR': 'Par√≠s, Francia', 'AOL': 'Paso de los Libres, Argentina', 'PEK': 'Pek√≠n, P.R. China',
            'PEN': 'Penang, Malasia', 'PMQ': 'Perito Moreno, Argentina', 'PER': 'Perth, Australia',
            'PHX': 'Phoenix (Arizona), U.S.A.', 'HKT': 'Phuket, Tailandia', 'PAJ': 'Pinamar, Argentina',
            'PIT': 'Pittsburgh (Pennsylvania), U.S.A.', 'PIU': 'Piura, Per√∫', 'PTP': 'Pointe √† Pitre, Guadalupe',
            'PDL': 'Ponta Delgada (Is. Azores), Portugal', 'PMV': 'Porlamar, Venezuela', 'PAP': 'Port au Prince, Hait√≠',
            'POS': 'Port of Spain, Trinidad', 'PDX': 'Portland (Oregon), U.S.A.', 'POA': 'Porto Alegre, Brasil',
            'PXO': 'Porto Santo (Is. Madeira)', 'PSS': 'Posadas, Argentina', 'PRG': 'Praga, Checoslovaquia',
            'PCL': 'Pucallpa, Per√∫', 'PUD': 'Puerto Deseado, Argentina', 'DRY': 'Puerto Madryn, Argentina',
            'PEM': 'Puerto Maldonado, Per√∫', 'PMC': 'Puerto Montt, Chile', 'PUQ': 'Punta Arenas, Chile',
            'PUJ': 'Punta Cana, Rep. Dominicana', 'PDP': 'Punta del Este, Uruguay', 'PMI': 'Palma de Mallorca (Is. Baleares), Espa√±a',
            'UIO': 'Quito, Ecuador', 'RDU': 'Raleigh (Carolina del N.), U.S.A.', 'RGN': 'Rang√∫n, Burma',
            'RAR': 'Rarotonga (Cook, Pac√≠fico Sur)', 'REC': 'Recife, Brasil', 'RCQ': 'Reconquista, Argentina',
            'REG': 'Reggio-Calabria, Italia', 'RES': 'Resistencia, Argentina', 'REK': 'Reykjavik, Islandia',
            'RIC': 'Richmond (Virginia), U.S.A.', 'RNS': 'Rinc√≥n de los Sauces, Argentina', 'RCU': 'R√≠o Cuarto, Argentina',
            'RIO': 'R√≠o de Janeiro, Brasil', 'RGL': 'R√≠o Gallegos, Argentina', 'RGA': 'R√≠o Grande, Argentina',
            'ROY': 'R√≠o Mayo, Argentina', 'RYO': 'R√≠o Turbio, Argentina', 'RUH': 'Riyadh, Arabia Saudita',
            'RTB': 'Roat√°n, Honduras', 'ROC': 'Rochester (New York), USA', 'ROM': 'Roma, Italia',
            'ROS': 'Rosario, Argentina', 'RUN': 'Saint Denis (Is. Reuni√≥n), Francia', 'SPN': 'Saip√°n (Islas Marianas)',
            'SLC': 'Salt Lake City (Utah), U.S.A.', 'SLA': 'Salta, Argentina', 'SSA': 'Salvador, Brasil',
            'SZG': 'Salzburgo, Austria', 'OES': 'San Antonio Oeste, Argentina', 'SAN': 'San Diego (California), U.S.A.',
            'SFO': 'San Francisco, Estados Unidos', 'SJC': 'San Jos√© (California), USA', 'SJO': 'San Jos√©, Costa Rica',
            'SJU': 'San Juan, Puerto Rico', 'UAQ': 'San Juan, Argentina', 'ULA': 'San Juli√°n, Argentina',
            'LUQ': 'San Luis, Argentina', 'SAP': 'San Pedro Sula, Honduras', 'AFA': 'San Rafael, Argentina',
            'SAL': 'San Salvador, El Salvador', 'SAH': 'Sana√° (Rep. √Årabe del Yemen)', 'RZA': 'Santa Cruz, Argentina',
            'SRZ': 'Santa Cruz, Bolivia', 'SFN': 'Santa Fe, Argentina', 'SMR': 'Santa Marta, Colombia',
            'RSA': 'Santa Rosa, Argentina', 'SST': 'Santa Teresita, Argentina', 'SCL': 'Santiago de Chile, Chile',
            'SCQ': 'Santiago de Compostela, Espa√±a', 'SDE': 'Santiago del Estero, Argentina', 'SDQ': 'Santo Domingo, Rep. Dominicana',
            'SLZ': 'S√£o Luiz (MA), Brasil', 'SAO': 'S√£o Paulo, Brasil', 'SEA': 'Seattle, Estados Unidos',
            'SEL': 'Se√∫l, Corea del Sur', 'SVQ': 'Sevilla, Espa√±a', 'SHA': 'Shanghai, China',
            'SNN': 'Shannon, Irlanda', 'SHJ': 'Sharjah, Emir. √Årabes', 'SGV': 'Sierra Grande, Argentina',
            'SIN': 'Singapur, Singapur', 'SOF': 'Sof√≠a, Bulgaria', 'SLU': 'St. Lucia (Santa Luc√≠a), Antillas',
            'SVG': 'Stavanger, Noruega', 'STR': 'Stuttgart, Alemania', 'STX': 'St. Croix (Is. V√≠rgenes)',
            'STL': 'St. Louis (Missouri), U.S.A.', 'SXM': 'St. Maarten, Antillas Holandesas', 'STT': 'St. Thomas (Is. V√≠rgenes)',
            'SYD': 'Sydney, Australia', 'TBT': 'Tabatinga, Brasil', 'TCQ': 'Tacna, Per√∫',
            'TPE': 'Taipei, Taiw√°n', 'TPA': 'Tampa (Florida), U.S.A.', 'NDL': 'Tandil, Argentina',
            'TDL': 'Tandil, Argentina', 'TNG': 'T√°nger, Marruecos', 'TJA': 'Tarija, Bolivia',
            'TFF': 'Tef√©, Brasil', 'TGU': 'Tegucigalpa, Honduras', 'THR': 'Teher√°n, Ir√°n',
            'TLV': 'Tel Aviv, Israel', 'ZCO': 'Temuco, Chile', 'TCI': 'Tenerife (Islas Canarias)',
            'TER': 'Terceira (Is. Azores)', 'SKG': 'Tesal√≥nica, Grecia', 'TSR': 'Timisoara, Rumania',
            'TIA': 'Tirana, Albania', 'TYO': 'Tokio, Jap√≥n', 'TBU': 'Tongatapu (Islas Tonga)',
            'YYZ': 'Toronto, Canad√°', 'REL': 'Trelew, Argentina', 'TIP': 'Tr√≠poli, Libia',
            'TRU': 'Trujillo, Per√∫', 'TUS': 'Tucson (Arizona), U.S.A.', 'TUC': 'Tucum√°n, Argentina',
            'TUN': 'T√∫nez, T√∫nez', 'TRN': 'Tur√≠n, Italia', 'USH': 'Ushuaia, Argentina',
            'ZAL': 'Valdivia, Chile', 'VLC': 'Valencia, Espa√±a', 'YVR': 'Vancouver, Canad√°',
            'VRA': 'Varadero, Cuba', 'WAW': 'Varsovia, Polonia', 'VCE': 'Venecia, Italia',
            'YYJ': 'Victoria, Canad√°', 'VFA': 'Victoria Falls, Zimbawe', 'VDM': 'Viedma, Argentina',
            'VIE': 'Viena, Austria', 'VGO': 'Vigo, Espa√±a', 'VLG': 'Villa Gesell, Argentina',
            'VME': 'Villa Mercedes, Argentina', 'VNO': 'Vilna, Lituania', 'KNA': 'Vi√±a del Mar, Chile',
            'WAS': 'Washington D.C., Estados Unidos', 'WLG': 'Wellington, Nueva Zelanda', 'WDH': 'Windhoek, Namibia',
            'YOG': 'Windsor, Canad√°', 'YWG': 'Winnipeg, Canad√°', 'XMN': 'Xiamen, Rep√∫blica Pop. China',
            'ZAG': 'Zagreb, Croacia', 'APZ': 'Zapala, Argentina', 'ZRH': 'Z√∫rich, Suiza',
            'IBZ': 'Ibiza, Espa√±a'
        };

        function getAirportName(code) {
            return airports[code] || `C√≥digo ${code} no encontrado`;
        }

        function loadExample() {
            const example = `SCR
/REF XG1/01APR
S09
15FEB
BCN
NXG700 XG701 29MAR24OCT 1234567 180320 IBZIBZ1800 1850PMIPMI JJ
/ FA.17301920 FD.18102000 MT.040/
SI PRIORITARIO FRECUENCIAS IMPARES 1030507
GI GRACIAS DPT OPS`;
            document.getElementById('inputText').value = example;
        }

        function cleanLine(line) {
            line = line.replace(/([A-Z]{2})l([A-Z]{2})/g, '$1I$2');
            line = line.replace(/PMl/g, 'PMI');
            line = line.replace(/Gl\s/g, 'GI ');
            line = line.replace(/Sl\s/g, 'SI ');
            return line;
        }

        function showAlert(message, type) {
            const alertBox = document.getElementById('alertBox');
            alertBox.textContent = message;
            alertBox.className = `alert alert-${type}`;
            alertBox.style.display = 'block';
            setTimeout(() => {
                alertBox.style.display = 'none';
            }, 5000);
        }

        function translateMessage() {
            const message = document.getElementById('inputText').value.trim();
            if (!message) {
                showAlert('Por favor, ingresa un mensaje SSIM', 'error');
                return;
            }

            const lines = message.split('\n');
            const cleanedLines = lines.map(line => cleanLine(line));
            
            try {
                const result = processMessage(cleanedLines);
                displayResult(result);
            } catch (error) {
                showAlert(`Error al procesar el mensaje: ${error.message}`, 'error');
            }
        }

        function processMessage(lines) {
            const result = {
                tipo: '',
                encabezado: {},
                datosVuelo: [],
                piesMensaje: []
            };

            let currentLine = 0;

            if (lines[currentLine]) {
                result.tipo = getMessageType(lines[currentLine].trim());
                currentLine++;
            }

            while (currentLine < lines.length && currentLine < 6) {
                const line = lines[currentLine].trim();

                if (line.startsWith('/')) {
                    result.encabezado.referencia = {
                        valor: line.substring(1),
                        significado: 'Referencia para identificar el mensaje (opcional)'
                    };
                } else if (/^[SW]\d{2}/.test(line)) {
                    const season = line[0] === 'S' ? 'Verano (Summer)' : 'Invierno (Winter)';
                    const year = '20' + line.substring(1, 3);
                    result.encabezado.temporada = {
                        valor: line,
                        significado: `Temporada ${season} del a√±o ${year}`
                    };
                } else if (/^\d{2}[A-Z]{3}/.test(line)) {
                    result.encabezado.fechaEnvio = {
                        valor: line,
                        significado: 'Fecha de env√≠o del mensaje'
                    };
                } else if (/^[A-Z]{3}/.test(line)) {
                    const airportCode = line;
                    result.encabezado.aeropuerto = {
                        valor: airportCode,
                        nombre: getAirportName(airportCode),
                        significado: 'C√≥digo IATA del aeropuerto'
                    };
                    currentLine++;
                    break;
                } else if (line.startsWith('REYT')) {
                    result.encabezado.referenciaRespuesta = {
                        valor: line,
                        significado: 'Referencia al mensaje original'
                    };
                }
                currentLine++;
            }

            while (currentLine < lines.length) {
                const line = lines[currentLine].trim();

                if (line.startsWith('SI ') || line.startsWith('GI ')) {
                    result.piesMensaje.push(translateFooter(line));
                } else if (line && !line.startsWith('/')) {
                    const flightData = translateFlightLine(line);
                    if (flightData) {
                        result.datosVuelo.push(flightData);
                    }
                }
                currentLine++;
            }

            return result;
        }

        function getMessageType(line) {
            const types = {
                'SCR': 'SCR - Slot Clearance Request/Reply\n(Solicitud/Respuesta de Asignaci√≥n de Slots en aeropuertos Coordinados)',
                'SMA': 'SMA - Schedule Movement Advice\n(Solicitud/Respuesta de Horario Autorizado)',
                'SIR': 'SIR - Slot/Schedule Information Request/Reply\n(Solicitud/Respuesta de Informaci√≥n)',
                'SAQ': 'SAQ - Slot/Schedule Availability Query\n(Consulta sobre Disponibilidad)',
                'SAL': 'SAL - Slot Allocation/Schedule Advice List\n(Lista de Slots Asignados)',
                'SHL': 'SHL - Slot Historical and Non-Historical Allocation List\n(Lista de Slots Hist√≥ricos)',
                'WCR': 'WCR - Waitlist Change Request/Reply\n(Solicitud/Respuesta de Cambio de Lista de Espera)',
                'WIR': 'WIR - Waitlist Information Request/Reply\n(Solicitud/Respuesta de Informaci√≥n sobre Lista de Espera)'
            };

            for (const key in types) {
                if (line.startsWith(key)) {
                    return types[key];
                }
            }
            return 'Tipo de mensaje desconocido';
        }

        function translateFlightLine(line) {
            const data = {};
            let pos = 0;

            try {
                const actionCode = line[pos];
                data.codigoAccion = translateActionCode(actionCode);
                pos++;

                let match = line.substring(pos).match(/^([A-Z0-9]{2,3}\d{3,4}[A-Z]?)\s+/);
                if (match) {
                    data.vueloLlegada = {
                        valor: match[1],
                        significado: 'Identificador del vuelo de llegada'
                    };
                    pos += match[0].length;
                }

                match = line.substring(pos).match(/^([A-Z0-9]{2,3}\d{3,4}[A-Z]?)\s+/);
                if (match) {
                    data.vueloSalida = {
                        valor: match[1],
                        significado: 'Identificador del vuelo de salida'
                    };
                    pos += match[0].length;
                }

                match = line.substring(pos).match(/^(\d{2}[A-Z]{3})(\d{2}[A-Z]{3})?\s+/);
                if (match) {
                    data.fechaInicio = {
                        valor: match[1],
                        significado: 'Fecha de inicio de operaci√≥n'
                    };
                    if (match[2]) {
                        data.fechaFin = {
                            valor: match[2],
                            significado: 'Fecha fin de operaci√≥n'
                        };
                    }
                    pos += match[0].length;
                }

                match = line.substring(pos).match(/^(\d{7})\s+/);
                if (match) {
                    const days = translateDays(match[1]);
                    data.diasOperacion = {
                        valor: match[1],
                        significado: 'D√≠as de operaci√≥n',
                        traduccion: days
                    };
                    pos += match[0].length;
                }

                match = line.substring(pos).match(/^(\d{3})([A-Z0-9]{2,3})\s+/);
                if (match) {
                    data.asientos = {
                        valor: match[1],
                        significado: 'N√∫mero de asientos'
                    };
                    data.tipoAeronave = {
                        valor: match[2],
                        significado: 'Tipo de aeronave (c√≥digo IATA)'
                    };
                    pos += match[0].length;
                }

                const pattern = /^([A-Z]{3})([A-Z]{3})?(\d{4})\s*(\d{4})?(\d)?([A-Z]{3})?([A-Z]{3})\s+([A-Z])([A-Z])?\s*(\d)?/;
                match = line.substring(pos).match(pattern);

                if (!match) {
                    const patternAlt = /^([A-Z]{3})([A-Z]{3})?(\d{4})(\d{4})?(\d)?([A-Z]{3})?([A-Z]{3})([A-Z])([A-Z])?(\d)?/;
                    match = line.substring(pos).match(patternAlt);
                }

                if (match) {
                    data.aeropuertoOrigen = {
                        valor: match[1],
                        nombre: getAirportName(match[1]),
                        significado: 'Aeropuerto de origen'
                    };
                    if (match[2]) {
                        data.escalaAnterior = {
                            valor: match[2],
                            nombre: getAirportName(match[2]),
                            significado: 'Escala anterior'
                        };
                    }
                    data.horaLlegada = {
                        valor: match[3],
                        significado: 'Hora de llegada UTC'
                    };
                    if (match[4]) {
                        data.horaSalida = {
                            valor: match[4],
                            significado: 'Hora de salida UTC'
                        };
                    }
                    if (match[5]) {
                        data.pernocta = {
                            valor: match[5],
                            significado: `Pernocta: ${match[5]} d√≠a(s)`
                        };
                    }
                    if (match[6]) {
                        data.escalaSiguiente = {
                            valor: match[6],
                            nombre: getAirportName(match[6]),
                            significado: 'Escala siguiente'
                        };
                    }
                    data.aeropuertoDestino = {
                        valor: match[7],
                        nombre: getAirportName(match[7]),
                        significado: 'Aeropuerto de destino'
                    };
                    const service = translateServiceCode(match[8]);
                    data.servicioLlegada = {
                        codigo: match[8],
                        tipo: service
                    };
                    if (match[9]) {
                        const serviceDep = translateServiceCode(match[9]);
                        data.servicioSalida = {
                            codigo: match[9],
                            tipo: serviceDep
                        };
                    }
                    if (match[10]) {
                        data.frecuencia = {
                            valor: match[10],
                            significado: `Cada ${match[10]} semanas`
                        };
                    }
                }

                const tagMatch = line.match(/\/([^/]+)\//);
                if (tagMatch) {
                    data.etiquetas = translateTags(tagMatch[1]);
                }

                return data;
            } catch (error) {
                return { error: error.message };
            }
        }

        function translateActionCode(code) {
            const codes = {
                'N': { significado: 'Nueva solicitud de operaci√≥n', quien: 'Compa√±√≠a A√©rea', detalle: 'Nueva solicitud de permiso de vuelo (A-SSIM)' },
                'C': { significado: 'Modificaci√≥n - L√≠nea Original', quien: 'Compa√±√≠a A√©rea', detalle: 'Solicitud de modificaci√≥n. Debe ir seguida de l√≠nea R' },
                'R': { significado: 'Modificaci√≥n - L√≠nea Revisada', quien: 'Compa√±√≠a A√©rea', detalle: 'L√≠nea con los nuevos datos. Debe ir precedida de l√≠nea C' },
                'D': { significado: 'Cancelaci√≥n', quien: 'Compa√±√≠a A√©rea', detalle: 'Solicitud de cancelaci√≥n de operaci√≥n previamente autorizada' },
                'W': { significado: 'L√≠nea con errores', quien: 'AESA (Respuesta)', detalle: 'Uso exclusivo de AESA para indicar errores en la solicitud' }
            };
            return codes[code] || { significado: `C√≥digo no v√°lido: ${code}`, quien: 'DESCONOCIDO', detalle: 'Solo se admiten c√≥digos N, C, R, D, W seg√∫n A-SSIM' };
        }

        function translateDays(days) {
            const dayNames = ['Lunes', 'Martes', 'Mi√©rcoles', 'Jueves', 'Viernes', 'S√°bado', 'Domingo'];
            const activeDays = [];
            for (let i = 0; i < 7; i++) {
                if (days[i] !== '0') {
                    activeDays.push(dayNames[i]);
                }
            }
            return activeDays.length > 0 ? activeDays.join(', ') : 'Ning√∫n d√≠a';
        }

        function translateServiceCode(code) {
            const services = {
                'J': 'Vuelo regular de pasajeros',
                'C': 'Vuelo ch√°rter de pasajeros',
                'F': 'Vuelo regular de carga/correo',
                'H': 'Vuelo ch√°rter de carga/correo',
                'P': 'Vuelo posicional',
                'X': 'Escala t√©cnica',
                'D': 'Aviaci√≥n general/privada',
                'N': 'Aviaci√≥n de negocios/Aerotaxi'
            };
            return services[code] || `C√≥digo desconocido: ${code}`;
        }

        function translateTags(tagString) {
            const tags = tagString.split(/\s+/);
            const translated = [];
            
            tags.forEach(tag => {
                if (tag.startsWith('FA.')) {
                    translated.push({
                        etiqueta: 'FA',
                        valor: tag.substring(3),
                        significado: 'Flexibilidad llegada',
                        detalle: 'Intervalo horario aceptable para llegada'
                    });
                } else if (tag.startsWith('FD.')) {
                    translated.push({
                        etiqueta: 'FD',
                        valor: tag.substring(3),
                        significado: 'Flexibilidad salida',
                        detalle: 'Intervalo horario aceptable para salida'
                    });
                } else if (tag.startsWith('MT.')) {
                    translated.push({
                        etiqueta: 'MT',
                        valor: tag.substring(3),
                        significado: 'Tiempo m√≠nimo escala',
                        detalle: `${tag.substring(3)} minutos m√≠nimo en tierra`
                    });
                } else if (tag.startsWith('RA.')) {
                    translated.push({
                        etiqueta: 'RA',
                        valor: tag.substring(3),
                        significado: 'Matr√≠cula aeronave',
                        detalle: 'Matr√≠cula espec√≠fica'
                    });
                } else if (tag.startsWith('CA.')) {
                    translated.push({
                        etiqueta: 'CA',
                        valor: tag.substring(3),
                        significado: 'Restricci√≥n llegada',
                        detalle: 'Motivo rechazo: RA=Pista, TA=Terminal, AA=Plataforma'
                    });
                } else if (tag.startsWith('CD.')) {
                    translated.push({
                        etiqueta: 'CD',
                        valor: tag.substring(3),
                        significado: 'Restricci√≥n salida',
                        detalle: 'Motivo rechazo: RA=Pista, TA=Terminal, AA=Plataforma'
                    });
                }
            });
            
            return translated;
        }

        function translateFooter(line) {
            if (line.startsWith('SI ')) {
                return {
                    tipo: 'SI - Informaci√≥n Suplementaria',
                    texto: line.substring(3),
                    significado: 'Informaci√≥n espec√≠fica sobre los datos'
                };
            } else if (line.startsWith('GI ')) {
                return {
                    tipo: 'GI - Informaci√≥n General',
                    texto: line.substring(3),
                    significado: 'Informaci√≥n general (saludos, etc.)'
                };
            }
            return { tipo: 'Desconocido', texto: line };
        }

        function displayResult(result) {
            let output = '';

            if (result.tipo) {
                output += '================================================================================\n';
                output += 'üìã TIPO DE MENSAJE\n';
                output += '================================================================================\n';
                output += `${result.tipo}\n\n`;
            }

            if (Object.keys(result.encabezado).length > 0) {
                output += '================================================================================\n';
                output += 'üìù ENCABEZADO\n';
                output += '================================================================================\n';
                for (const key in result.encabezado) {
                    const data = result.encabezado[key];
                    output += `\n‚Ä¢ ${key.toUpperCase()}:\n`;
                    output += `  Valor: ${data.valor}\n`;
                    if (data.nombre) {
                        output += `  Aeropuerto: ${data.nombre}\n`;
                    }
                    output += `  Significado: ${data.significado}\n`;
                }
                output += '\n';
            }

            if (result.datosVuelo.length > 0) {
                output += '================================================================================\n';
                output += '‚úàÔ∏è  DATOS DE VUELO\n';
                output += '================================================================================\n';

                result.datosVuelo.forEach((flight, idx) => {
                    output += `\n--- OPERACI√ìN #${idx + 1} ---\n\n`;

                    if (flight.error) {
                        output += `‚ùå Error: ${flight.error}\n`;
                        return;
                    }

                    if (flight.codigoAccion) {
                        const action = flight.codigoAccion;
                        output += '‚Ä¢ C√ìDIGO DE ACCI√ìN:\n';
                        output += `  Significado: ${action.significado}\n`;
                        output += `  Usado por: ${action.quien}\n`;
                        output += `  Detalle: ${action.detalle}\n\n`;
                    }

                    for (const key in flight) {
                        if (key === 'codigoAccion' || key === 'etiquetas') continue;

                        const value = flight[key];
                        if (typeof value === 'object' && value !== null) {
                            output += `‚Ä¢ ${key.toUpperCase()}:\n`;
                            if (value.valor) {
                                if (['aeropuertoOrigen', 'aeropuertoDestino', 'escalaAnterior', 'escalaSiguiente'].includes(key)) {
                                    output += `  C√≥digo: ${value.valor}\n`;
                                    if (value.nombre) {
                                        output += `  Aeropuerto: ${value.nombre}\n`;
                                    }
                                } else {
                                    output += `  Valor: ${value.valor}\n`;
                                }
                            }
                            if (value.codigo) {
                                output += `  C√≥digo: ${value.codigo}\n`;
                            }
                            if (value.significado) {
                                output += `  Significado: ${value.significado}\n`;
                            }
                            if (value.traduccion) {
                                output += `  ‚Üí ${value.traduccion}\n`;
                            }
                            if (value.tipo) {
                                output += `  Tipo: ${value.tipo}\n`;
                            }
                            output += '\n';
                        }
                    }

                    if (flight.etiquetas && flight.etiquetas.length > 0) {
                        output += '‚Ä¢ ETIQUETAS ADICIONALES:\n';
                        flight.etiquetas.forEach(tag => {
                            output += `  [${tag.etiqueta}] ${tag.significado}\n`;
                            output += `      Valor: ${tag.valor}\n`;
                            output += `      ${tag.detalle}\n`;
                        });
                        output += '\n';
                    }
                });
            }

            if (result.piesMensaje.length > 0) {
                output += '================================================================================\n';
                output += 'üí¨ INFORMACI√ìN ADICIONAL\n';
                output += '================================================================================\n';
                result.piesMensaje.forEach(footer => {
                    output += `\n‚Ä¢ ${footer.tipo}\n`;
                    if (footer.significado) {
                        output += `  ${footer.significado}\n`;
                    }
                    output += `  Texto: ${footer.texto}\n`;
                });
            }

            document.getElementById('outputText').textContent = output;
        }
    </script>
</body>

</html>
